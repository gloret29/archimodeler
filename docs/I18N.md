# Internationalisation (i18n) - Documentation

## Vue d'ensemble

L'internationalisation a Ã©tÃ© implÃ©mentÃ©e dans ArchiModeler en utilisant **next-intl**, une bibliothÃ¨que puissante pour Next.js qui permet de gÃ©rer facilement plusieurs langues dans l'application.

## Langues supportÃ©es

- ðŸ‡¬ðŸ‡§ **Anglais (en)** - Langue par dÃ©faut
- ðŸ‡«ðŸ‡· **FranÃ§ais (fr)**

## Architecture

### Structure des fichiers

```
apps/web/
â”œâ”€â”€ messages/
â”‚   â”œâ”€â”€ en.json          # Traductions anglaises
â”‚   â””â”€â”€ fr.json          # Traductions franÃ§aises
â”œâ”€â”€ app/
â”‚   â””â”€â”€ [locale]/        # Routes avec support i18n
â”‚       â”œâ”€â”€ home/
â”‚       â”œâ”€â”€ studio/
â”‚       â””â”€â”€ settings/
â”‚           â”œâ”€â”€ profile/
â”‚           â”œâ”€â”€ appearance/
â”‚           â””â”€â”€ language/
â”œâ”€â”€ i18n.ts              # Configuration i18n
â”œâ”€â”€ middleware.ts        # Middleware de routage i18n
â””â”€â”€ navigation.ts        # Utilitaires de navigation i18n
```

### Fichiers de traduction

Les traductions sont organisÃ©es par domaine fonctionnel :

#### `messages/en.json` et `messages/fr.json`

```json
{
    "Auth": { ... },           // Authentification
    "Home": { ... },           // Page d'accueil
    "Studio": { ... },         // Studio de modÃ©lisation
    "Settings": { ... },       // ParamÃ¨tres
    "Common": { ... }          // Ã‰lÃ©ments communs
}
```

## Utilisation

### Dans les composants

```tsx
import { useTranslations } from 'next-intl';

export default function MyComponent() {
    const t = useTranslations('Settings');
    
    return (
        <div>
            <h1>{t('title')}</h1>
            <p>{t('subtitle')}</p>
        </div>
    );
}
```

### Navigation avec i18n

```tsx
import { Link } from '@/navigation';

export default function Navigation() {
    return (
        <Link href="/settings">
            Settings
        </Link>
    );
}
```

Le composant `Link` de `@/navigation` gÃ¨re automatiquement la locale actuelle.

### Changement de langue

Le changement de langue se fait via la page **Settings > Language** :

```tsx
import { useRouter, usePathname } from '@/navigation';
import { useTransition } from 'react';

const router = useRouter();
const pathname = usePathname();
const [isPending, startTransition] = useTransition();

function changeLanguage(newLocale: string) {
    startTransition(() => {
        router.replace(pathname, { locale: newLocale });
    });
}
```

## Pages traduites

### âœ… Pages complÃ¨tement traduites

1. **Studio** (`/studio`)
   - Titre de la page
   - Bouton de retour

2. **Settings Layout** (`/settings`)
   - Titre et sous-titre
   - Navigation (Profile, Appearance, Language)
   - Bouton de retour

3. **Profile** (`/settings/profile`)
   - Titre et description
   - Labels de formulaire (Username, Email)
   - Placeholders
   - Descriptions des champs
   - Bouton de mise Ã  jour

4. **Appearance** (`/settings/appearance`)
   - Titre et description
   - Label du thÃ¨me
   - Options de thÃ¨me (Light, Dark, System)

5. **Language** (`/settings/language`)
   - Titre et description
   - SÃ©lection de langue
   - Application immÃ©diate du changement

## Configuration

### `i18n.ts`

```typescript
import { getRequestConfig } from 'next-intl/server';

export default getRequestConfig(async ({ locale }) => ({
    messages: (await import(`./messages/${locale}.json`)).default
}));
```

### `middleware.ts`

```typescript
import createMiddleware from 'next-intl/middleware';

export default createMiddleware({
    locales: ['en', 'fr'],
    defaultLocale: 'en'
});

export const config = {
    matcher: ['/((?!api|_next|_vercel|.*\\..*).*)']
};
```

### `navigation.ts`

```typescript
import { createSharedPathnamesNavigation } from 'next-intl/navigation';

export const locales = ['en', 'fr'] as const;
export const { Link, redirect, usePathname, useRouter } = 
    createSharedPathnamesNavigation({ locales });
```

## FonctionnalitÃ©s

### âœ… ImplÃ©mentÃ©

- [x] Configuration de base next-intl
- [x] Support de 2 langues (EN/FR)
- [x] Traduction de toutes les pages principales
- [x] Page de sÃ©lection de langue
- [x] Changement de langue en temps rÃ©el
- [x] Persistance de la langue dans l'URL
- [x] Navigation i18n-aware

### ðŸ”„ Ã€ amÃ©liorer (optionnel)

- [ ] DÃ©tection automatique de la langue du navigateur
- [ ] Ajout de langues supplÃ©mentaires (ES, DE, etc.)
- [ ] Traduction des messages d'erreur
- [ ] Traduction des composants de l'interface de modÃ©lisation
- [ ] Traduction des tooltips et messages d'aide
- [ ] Formatage des dates selon la locale
- [ ] Formatage des nombres selon la locale

## Ajout d'une nouvelle langue

Pour ajouter une nouvelle langue (par exemple, l'espagnol) :

1. **CrÃ©er le fichier de traduction**
   ```bash
   cp apps/web/messages/en.json apps/web/messages/es.json
   ```

2. **Traduire le contenu**
   Modifier `apps/web/messages/es.json` avec les traductions espagnoles

3. **Mettre Ã  jour la configuration**
   
   Dans `middleware.ts` :
   ```typescript
   export default createMiddleware({
       locales: ['en', 'fr', 'es'],
       defaultLocale: 'en'
   });
   ```
   
   Dans `navigation.ts` :
   ```typescript
   export const locales = ['en', 'fr', 'es'] as const;
   ```

4. **Ajouter l'option dans la page Language**
   
   Dans `apps/web/app/[locale]/settings/language/page.tsx` :
   ```tsx
   <FormItem>
       <FormLabel className="...">
           <FormControl>
               <RadioGroupItem value="es" className="sr-only" />
           </FormControl>
           <div className="...">
               <div className="...">ðŸ‡ªðŸ‡¸</div>
               <div className="...">
                   <div className="font-medium">EspaÃ±ol</div>
                   <div className="text-sm text-muted-foreground">EspaÃ±a</div>
               </div>
           </div>
       </FormLabel>
   </FormItem>
   ```

## Bonnes pratiques

1. **Organisation des clÃ©s**
   - Grouper les traductions par domaine fonctionnel
   - Utiliser des noms de clÃ©s descriptifs
   - Ã‰viter les traductions en dur dans le code

2. **CohÃ©rence**
   - Maintenir la mÃªme structure dans tous les fichiers de langue
   - Utiliser les mÃªmes clÃ©s dans tous les fichiers

3. **Performance**
   - Les fichiers de traduction sont chargÃ©s cÃ´tÃ© serveur
   - Pas d'impact sur le bundle JavaScript client

4. **AccessibilitÃ©**
   - Toujours fournir des traductions complÃ¨tes
   - Ne jamais laisser de clÃ©s manquantes

## Tests

Pour tester l'internationalisation :

1. DÃ©marrer le serveur de dÃ©veloppement
2. Naviguer vers `/en/settings/language`
3. Changer la langue vers FranÃ§ais
4. VÃ©rifier que toutes les pages sont traduites
5. Naviguer entre les pages pour vÃ©rifier la persistance

## Ressources

- [next-intl Documentation](https://next-intl-docs.vercel.app/)
- [Next.js Internationalization](https://nextjs.org/docs/app/building-your-application/routing/internationalization)
